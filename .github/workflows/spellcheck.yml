---
name: Autofix
on:
  push:
    # Only targets develop branch to avoid amplification effects of auto-fixing
    # the exact same stuff in multiple non-rebased branches.
    branches:
      - 'main'

jobs:

  typos:
    name: Fix spelling and create a PR
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2.3.2
      - uses: sobolevn/misspell-fixer-action@0.1.0
      - uses: peter-evans/create-pull-request@v3
        with:
          author: "Lucas Larson <LucasLarson@riseup.net>"
          commit-message: "[autofix] spelling"
          title: "[autofix] spelling"
          body: >
            [Auto-generated on run
            #${{ github.run_id }}](https://github.com/${{ github.repository
            }}/actions/runs/${{ github.run_id }}) as defined by [workflow
            action](https://github.com/${{ github.repository
            }}/blob/${{ github.base_ref }}/.github/workflows/spellcheck.yml).
          assignees: LucasLarson
          branch: autofix-spelling
